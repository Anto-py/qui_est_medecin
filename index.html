<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qui est m√©decin ? - D√©tection des biais</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 900px;
            width: 100%;
            padding: 40px;
            text-align: center;
        }

        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .phase-indicator {
            background: #f0f0f0;
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 30px;
            font-weight: bold;
            color: #667eea;
        }

        .image-container {
            margin: 30px auto;
            max-width: 350px;
        }

        .image-container img {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .counter {
            font-size: 1.2em;
            color: #666;
            margin: 20px 0;
        }

        .buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        button {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
        }

        .btn-medecin {
            background: #10b981;
            color: white;
        }

        .btn-medecin:hover {
            background: #059669;
            transform: scale(1.05);
        }

        .btn-pas-medecin {
            background: #ef4444;
            color: white;
        }

        .btn-pas-medecin:hover {
            background: #dc2626;
            transform: scale(1.05);
        }

        .btn-next {
            background: #667eea;
            color: white;
            margin-top: 20px;
        }

        .btn-next:hover {
            background: #5568d3;
            transform: scale(1.05);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .result-card {
            border-radius: 10px;
            padding: 10px;
            position: relative;
        }

        .result-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .result-correct {
            background: #d1fae5;
            border: 3px solid #10b981;
        }

        .result-incorrect {
            background: #fee2e2;
            border: 3px solid #ef4444;
        }

        .result-label {
            font-size: 0.9em;
            font-weight: bold;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .stat-number {
            font-size: 3em;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }

        .bias-analysis {
            background: #fef3c7;
            border-left: 5px solid #f59e0b;
            padding: 20px;
            margin: 30px 0;
            text-align: left;
            border-radius: 10px;
        }

        .bias-analysis h3 {
            color: #92400e;
            margin-bottom: 15px;
        }

        .bias-analysis p {
            color: #78350f;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .ai-prediction {
            background: #dbeafe;
            border-left: 5px solid #3b82f6;
            padding: 20px;
            margin: 30px 0;
            text-align: left;
            border-radius: 10px;
        }

        .ai-prediction h3 {
            color: #1e40af;
            margin-bottom: 15px;
        }

        .ai-rule {
            background: white;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            color: #1e40af;
            margin: 10px 0;
        }

        .discussion-questions {
            background: #f3e8ff;
            border-left: 5px solid #a855f7;
            padding: 20px;
            margin: 30px 0;
            text-align: left;
            border-radius: 10px;
        }

        .discussion-questions h3 {
            color: #6b21a8;
            margin-bottom: 15px;
        }

        .discussion-questions ul {
            list-style-position: inside;
            color: #7c3aed;
        }

        .discussion-questions li {
            margin: 10px 0;
            line-height: 1.6;
        }

        .hidden {
            display: none;
        }

        .intro-text {
            font-size: 1.1em;
            line-height: 1.8;
            color: #444;
            margin: 20px 0;
            text-align: left;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .score-badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            margin: 10px;
        }

        .score-excellent {
            background: #10b981;
            color: white;
        }

        .score-good {
            background: #3b82f6;
            color: white;
        }

        .score-attention {
            background: #f59e0b;
            color: white;
        }

        .score-critique {
            background: #ef4444;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Phase 1: Introduction -->
        <div id="intro" class="phase fade-in">
            <h1>ü©∫ Qui est m√©decin ?</h1>
            <p class="subtitle">Un jeu pour r√©v√©ler tes biais (et ceux de l'IA)</p>
            
            <div class="intro-text">
                <p><strong>üìã Les r√®gles :</strong></p>
                <p>Tu vas voir 14 photos de personnes. Certaines sont m√©decins, d'autres non.</p>
                <p>Pour chaque photo, tu dois d√©cider rapidement : <strong>M√âDECIN</strong> ou <strong>PAS M√âDECIN</strong>.</p>
                <br>
                <p><strong>‚ö†Ô∏è Attention :</strong> Ce n'est pas parce que quelqu'un porte une blouse qu'il/elle est m√©decin... et ce n'est pas parce que quelqu'un est en tenue de ville qu'il/elle ne l'est pas !</p>
                <br>
                <p><strong>üéØ L'objectif :</strong> D√©couvrir tes propres st√©r√©otypes et comprendre comment une IA pourrait les apprendre.</p>
            </div>
            
            <button class="btn-next" onclick="startGame()">Commencer le jeu</button>
        </div>

        <!-- Phase 2: Jeu -->
        <div id="game" class="phase hidden">
            <div class="phase-indicator">Phase 1 : Tes choix</div>
            <div class="counter" id="counter">Photo 1/14</div>
            
            <div class="image-container">
                <img id="currentImage" src="" alt="Personne √† identifier">
            </div>
            
            <div class="buttons">
                <button class="btn-medecin" onclick="makeChoice(true)">‚úì M√âDECIN</button>
                <button class="btn-pas-medecin" onclick="makeChoice(false)">‚úó PAS M√âDECIN</button>
            </div>
        </div>

        <!-- Phase 3: R√©sultats -->
        <div id="results" class="phase hidden">
            <div class="phase-indicator">Phase 2 : Le reveal</div>
            <h2>Tes r√©sultats</h2>
            
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-label">Score</div>
                    <div class="stat-number" id="scorePercent">0%</div>
                    <div class="stat-label">de bonnes r√©ponses</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Biais d√©tect√©</div>
                    <div class="stat-number" id="biasScore">0</div>
                    <div class="stat-label">points de st√©r√©otype</div>
                </div>
            </div>

            <div id="scoreInterpretation"></div>
            
            <div class="results-grid" id="resultsGrid"></div>
            
            <button class="btn-next" onclick="showBiasAnalysis()">Analyser mes biais</button>
        </div>

        <!-- Phase 4: Analyse des biais -->
        <div id="biasAnalysis" class="phase hidden">
            <div class="phase-indicator">Phase 3 : Analyse de tes biais</div>
            <h2>üîç Ce que tes choix r√©v√®lent</h2>
            
            <div id="biasContent"></div>
            
            <button class="btn-next" onclick="showAIPrediction()">Et si une IA apprenait de mes choix ?</button>
        </div>

        <!-- Phase 5: Pr√©diction IA -->
        <div id="aiPrediction" class="phase hidden">
            <div class="phase-indicator">Phase 4 : L'IA form√©e sur tes biais</div>
            <h2>ü§ñ Si une IA √©tait entra√Æn√©e sur TES r√©ponses...</h2>
            
            <div class="ai-prediction">
                <h3>Elle cr√©erait cette r√®gle :</h3>
                <div class="ai-rule" id="aiRule"></div>
                <p style="margin-top: 15px;"><strong>Cons√©quence :</strong> <span id="aiConsequence"></span></p>
            </div>
            
            <button class="btn-next" onclick="showDiscussion()">Discutons-en</button>
        </div>

        <!-- Phase 6: Questions de discussion -->
        <div id="discussion" class="phase hidden">
            <div class="phase-indicator">Phase 5 : Discussion guid√©e</div>
            <h2>üí≠ Questions pour r√©fl√©chir</h2>
            
            <div class="discussion-questions">
                <h3>√Ä discuter en groupe :</h3>
                <ul>
                    <li>D'o√π viennent ces st√©r√©otypes que tu as utilis√©s pour juger ?</li>
                    <li>Si cette IA √©tait utilis√©e pour trier des CV de m√©decins, qui serait discrimin√© ?</li>
                    <li>Comment les vraies IA apprennent-elles ces biais ?</li>
                    <li>Qui d√©cide des donn√©es sur lesquelles on entra√Æne une IA ?</li>
                    <li>Peut-on cr√©er une IA "neutre" ? Est-ce seulement possible ?</li>
                </ul>
            </div>

            <div class="bias-analysis">
                <h3>üìö Ce qu'il faut retenir</h3>
                <p><strong>1. Les IA ne font qu'apprendre ce qu'on leur montre.</strong> Si tu lui montres uniquement des hommes blancs en blouse comme m√©decins, elle reproduira ce biais.</p>
                <p><strong>2. Nos st√©r√©otypes sont inconscients.</strong> Tu ne le fais pas expr√®s, mais ton cerveau utilise des raccourcis bas√©s sur ce qu'il voit le plus souvent dans les m√©dias, les s√©ries, etc.</p>
                <p><strong>3. Les cons√©quences sont r√©elles.</strong> Des IA biais√©es sont utilis√©es pour recruter, diagnostiquer, accorder des pr√™ts... et discriminent des millions de personnes.</p>
            </div>
            
            <button class="btn-next" onclick="restart()">Recommencer le jeu</button>
        </div>
    </div>

    <script>
        // Base de donn√©es des images avec leurs m√©tadonn√©es
        const images = [
            { src: 'femme_afro_blouse_me_decin.avif', isDoctor: true, gender: 'femme', ethnicity: 'afro', attire: 'blouse' },
            { src: 'femme_afro_blouse.jpg', isDoctor: false, gender: 'femme', ethnicity: 'afro', attire: 'blouse' },
            { src: 'femme_blanche_tenue_de_ville_medecin.jpg', isDoctor: true, gender: 'femme', ethnicity: 'blanche', attire: 'ville' },
            { src: 'femme_blanche_tenue_de_ville.jpg', isDoctor: false, gender: 'femme', ethnicity: 'blanche', attire: 'ville' },
            { src: 'femme_voile_e_medecin.webp', isDoctor: true, gender: 'femme', ethnicity: 'voil√©e', attire: 'ville' },
            { src: 'homme_afro_blouse_medecin.jpg', isDoctor: true, gender: 'homme', ethnicity: 'afro', attire: 'blouse' },
            { src: 'homme_afro_tenue_de_ville_medecin.jpg', isDoctor: true, gender: 'homme', ethnicity: 'afro', attire: 'ville' },
            { src: 'homme_blanc_blouse_me_decin_1.jpg', isDoctor: true, gender: 'homme', ethnicity: 'blanc', attire: 'blouse' },
            { src: 'homme_blanc_blouse_me_decin_2.jpg', isDoctor: true, gender: 'homme', ethnicity: 'blanc', attire: 'blouse' },
            { src: 'homme_blanc_blouse_me_decin_3.webp', isDoctor: true, gender: 'homme', ethnicity: 'blanc', attire: 'blouse' },
            { src: 'homme_blanc_blouse_me_decin.jpg', isDoctor: true, gender: 'homme', ethnicity: 'blanc', attire: 'blouse' },
            { src: 'homme_blanc_blouse.jpg', isDoctor: false, gender: 'homme', ethnicity: 'blanc', attire: 'blouse' },
            { src: 'homme_blanc_blouse.webp', isDoctor: false, gender: 'homme', ethnicity: 'blanc', attire: 'blouse' },
            { src: 'homme_blanc_tenue_de_ville.jpg', isDoctor: false, gender: 'homme', ethnicity: 'blanc', attire: 'ville' }
        ];

        let currentIndex = 0;
        let userChoices = [];
        let startTime;

        function startGame() {
            document.getElementById('intro').classList.add('hidden');
            document.getElementById('game').classList.remove('hidden');
            shuffleArray(images);
            showImage();
            startTime = Date.now();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function showImage() {
            const img = images[currentIndex];
            document.getElementById('currentImage').src = img.src;
            document.getElementById('counter').textContent = `Photo ${currentIndex + 1}/${images.length}`;
        }

        function makeChoice(choice) {
            const responseTime = Date.now() - startTime;
            userChoices.push({
                image: images[currentIndex],
                userSaid: choice,
                correct: choice === images[currentIndex].isDoctor,
                responseTime: responseTime
            });

            currentIndex++;
            startTime = Date.now();

            if (currentIndex < images.length) {
                showImage();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('game').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');

            const correctAnswers = userChoices.filter(c => c.correct).length;
            const scorePercent = Math.round((correctAnswers / images.length) * 100);
            document.getElementById('scorePercent').textContent = `${scorePercent}%`;

            // Calcul du score de biais
            const biasScore = calculateBiasScore();
            document.getElementById('biasScore').textContent = biasScore;

            // Interpr√©tation du score
            let interpretation = '';
            let badgeClass = '';
            if (scorePercent >= 90) {
                interpretation = '<div class="score-badge score-excellent">üéØ Excellent ! Peu de st√©r√©otypes d√©tect√©s</div>';
            } else if (scorePercent >= 70) {
                interpretation = '<div class="score-badge score-good">üëç Bien ! Mais quelques biais subsistent</div>';
            } else if (scorePercent >= 50) {
                interpretation = '<div class="score-badge score-attention">‚ö†Ô∏è Attention ! Tes st√©r√©otypes t\'ont tromp√©</div>';
            } else {
                interpretation = '<div class="score-badge score-critique">üö® Esprit critique n√©cessaire ! Biais importants</div>';
            }
            document.getElementById('scoreInterpretation').innerHTML = interpretation;

            // Affichage de la grille de r√©sultats
            const grid = document.getElementById('resultsGrid');
            grid.innerHTML = '';
            userChoices.forEach((choice, index) => {
                const card = document.createElement('div');
                card.className = `result-card ${choice.correct ? 'result-correct' : 'result-incorrect'}`;
                card.innerHTML = `
                    <img src="${choice.image.src}" alt="Photo ${index + 1}">
                    <div class="result-label">
                        ${choice.correct ? '‚úì Correct' : '‚úó Erreur'}
                    </div>
                    <div style="font-size: 0.8em; margin-top: 5px;">
                        ${choice.image.isDoctor ? 'M√©decin' : 'Pas m√©decin'}
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function calculateBiasScore() {
            let biasPoints = 0;

            // Biais 1: Associer blouse = m√©decin automatiquement
            const blouseChoices = userChoices.filter(c => c.image.attire === 'blouse' && c.userSaid === true);
            const blouseErrors = blouseChoices.filter(c => !c.correct).length;
            biasPoints += blouseErrors * 2;

            // Biais 2: √âcarter les femmes
            const womenDoctors = userChoices.filter(c => c.image.gender === 'femme' && c.image.isDoctor);
            const womenMissed = womenDoctors.filter(c => !c.userSaid).length;
            biasPoints += womenMissed * 3;

            // Biais 3: √âcarter les minorit√©s
            const minorityDoctors = userChoices.filter(c => 
                (c.image.ethnicity === 'afro' || c.image.ethnicity === 'voil√©e') && c.image.isDoctor
            );
            const minorityMissed = minorityDoctors.filter(c => !c.userSaid).length;
            biasPoints += minorityMissed * 3;

            // Biais 4: Favoriser homme blanc en blouse
            const whiteManBlouse = userChoices.filter(c => 
                c.image.gender === 'homme' && 
                c.image.ethnicity === 'blanc' && 
                c.image.attire === 'blouse' &&
                c.userSaid === true
            );
            biasPoints += whiteManBlouse.length;

            return biasPoints;
        }

        function showBiasAnalysis() {
            document.getElementById('results').classList.add('hidden');
            document.getElementById('biasAnalysis').classList.remove('hidden');

            let biasHTML = '';

            // Analyse sp√©cifique selon les erreurs
            const womenDoctors = userChoices.filter(c => c.image.gender === 'femme' && c.image.isDoctor);
            const womenMissed = womenDoctors.filter(c => !c.userSaid).length;

            const minorityDoctors = userChoices.filter(c => 
                (c.image.ethnicity === 'afro' || c.image.ethnicity === 'voil√©e') && c.image.isDoctor
            );
            const minorityMissed = minorityDoctors.filter(c => !c.userSaid).length;

            const blouseNonDoctors = userChoices.filter(c => 
                c.image.attire === 'blouse' && !c.image.isDoctor && c.userSaid
            );

            const villeDoctor = userChoices.filter(c => 
                c.image.attire === 'ville' && c.image.isDoctor && !c.userSaid
            );

            if (womenMissed > 0) {
                biasHTML += `
                    <div class="bias-analysis">
                        <h3>‚ö†Ô∏è Biais de genre d√©tect√©</h3>
                        <p>Tu as manqu√© <strong>${womenMissed}</strong> femme(s) m√©decin(s).</p>
                        <p>Pourquoi ? Peut-√™tre parce que dans les s√©ries TV et les m√©dias, les m√©decins sont souvent repr√©sent√©s comme des hommes. Ton cerveau a appris ce raccourci.</p>
                    </div>
                `;
            }

            if (minorityMissed > 0) {
                biasHTML += `
                    <div class="bias-analysis">
                        <h3>‚ö†Ô∏è Biais ethnique d√©tect√©</h3>
                        <p>Tu as manqu√© <strong>${minorityMissed}</strong> m√©decin(s) issu(s) de minorit√©s.</p>
                        <p>Les repr√©sentations dominantes dans notre soci√©t√© associent souvent "autorit√© m√©dicale" √† "personne blanche". C'est un biais syst√©mique.</p>
                    </div>
                `;
            }

            if (blouseNonDoctors.length > 0) {
                biasHTML += `
                    <div class="bias-analysis">
                        <h3>‚ö†Ô∏è Biais de l'apparence</h3>
                        <p>Tu as identifi√© <strong>${blouseNonDoctors.length}</strong> personne(s) en blouse comme m√©decin alors qu'elles ne l'√©taient pas.</p>
                        <p>La blouse ne fait pas le m√©decin ! Infirmiers, techniciens de labo, pharmaciens... beaucoup de m√©tiers portent une blouse blanche.</p>
                    </div>
                `;
            }

            if (villeDoctor.length > 0) {
                biasHTML += `
                    <div class="bias-analysis">
                        <h3>‚ö†Ô∏è St√©r√©otype du m√©decin</h3>
                        <p>Tu as √©cart√© <strong>${villeDoctor.length}</strong> m√©decin(s) en tenue de ville.</p>
                        <p>Les m√©decins ne sont pas toujours √† l'h√¥pital ! Beaucoup travaillent en cabinet, font de la recherche, ou exercent dans des contextes vari√©s.</p>
                    </div>
                `;
            }

            if (biasHTML === '') {
                biasHTML = `
                    <div class="bias-analysis" style="border-color: #10b981; background: #d1fae5;">
                        <h3 style="color: #065f46;">‚úì Bravo !</h3>
                        <p style="color: #065f46;">Tu as fait tr√®s peu d'erreurs bas√©es sur des st√©r√©otypes. Ton esprit critique est bien aiguis√© !</p>
                    </div>
                `;
            }

            document.getElementById('biasContent').innerHTML = biasHTML;
        }

        function showAIPrediction() {
            document.getElementById('biasAnalysis').classList.add('hidden');
            document.getElementById('aiPrediction').classList.remove('hidden');

            // G√©n√©ration de la r√®gle d'IA bas√©e sur les choix
            let aiRule = "SI (";
            let rules = [];

            // Analyser les patterns dans les choix corrects du joueur
            const yesChoices = userChoices.filter(c => c.userSaid === true);
            
            const hommeRatio = yesChoices.filter(c => c.image.gender === 'homme').length / yesChoices.length;
            if (hommeRatio > 0.6) rules.push("genre = HOMME");

            const blouseRatio = yesChoices.filter(c => c.image.attire === 'blouse').length / yesChoices.length;
            if (blouseRatio > 0.6) rules.push("v√™tement = BLOUSE");

            const blancRatio = yesChoices.filter(c => c.image.ethnicity === 'blanc').length / yesChoices.length;
            if (blancRatio > 0.5) rules.push("origine = BLANCHE");

            if (rules.length === 0) {
                rules.push("choix_al√©atoires");
            }

            aiRule += rules.join(" ET ") + ") ALORS m√©decin = OUI";
            document.getElementById('aiRule').textContent = aiRule;

            // Cons√©quence
            let consequence = "";
            if (rules.includes("genre = HOMME") && rules.includes("origine = BLANCHE")) {
                consequence = "Cette IA discriminerait massivement les femmes et les personnes racis√©es dans le recrutement m√©dical. Des milliers de candidatures excellentes seraient rejet√©es automatiquement.";
            } else if (rules.includes("v√™tement = BLOUSE")) {
                consequence = "Cette IA ne reconna√Ætrait que les m√©decins hospitaliers et √©carterait tous les m√©decins de ville, chercheurs, ou exer√ßant dans d'autres contextes.";
            } else if (rules.includes("genre = HOMME")) {
                consequence = "Cette IA reproduirait le sexisme historique de la m√©decine et bloquerait l'acc√®s des femmes √† la profession.";
            } else {
                consequence = "Tes choix √©taient assez √©quilibr√©s, mais m√™me de petits biais dans les donn√©es d'entra√Ænement peuvent avoir des cons√©quences √©normes √† l'√©chelle de millions de d√©cisions.";
            }

            document.getElementById('aiConsequence').textContent = consequence;
        }

        function showDiscussion() {
            document.getElementById('aiPrediction').classList.add('hidden');
            document.getElementById('discussion').classList.remove('hidden');
        }

        function restart() {
            currentIndex = 0;
            userChoices = [];
            document.getElementById('discussion').classList.add('hidden');
            document.getElementById('intro').classList.remove('hidden');
        }
    </script>
</body>
</html>
